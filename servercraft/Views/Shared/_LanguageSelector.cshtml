@using System.Threading
@using System.Globalization

@{
    var currentCulture = Thread.CurrentThread.CurrentUICulture.Name.ToLowerInvariant();
    string currentFlag = "";
    string currentLanguage = "";
    switch (currentCulture)
    {
        case "en":
            currentFlag = Url.Content("~/Content/images/flags/gb.png");
            currentLanguage = "English";
            break;
        case "ro":
            currentFlag = Url.Content("~/Content/images/flags/ro.png");
            currentLanguage = "Romanian";
            break;
        case "ru":
            currentFlag = Url.Content("~/Content/images/flags/ru.png");
            currentLanguage = "Russian";
            break;
        default:
            currentFlag = Url.Content("~/Content/images/flags/gb.png");
            currentLanguage = "English";
            break;
    }
}

<ul class="nav navbar-nav navbar-right language-selector">
    <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
            <span style="display:inline-flex; align-items:center;">
                <img src="@currentFlag" alt="@currentLanguage" style="width:24px; margin-right:8px;" />
                <span style="font-weight:500;">@currentLanguage</span>
            </span>
            <span class="caret"></span>
        </a>
        <ul class="dropdown-menu">
            <li>
                <a href="@Url.Action("Change", "Language", new { culture = "en" })">
                    <span style="display:inline-flex; align-items:center;">
                        <img src="~/Content/images/flags/gb.png" alt="English" style="width:24px; margin-right:8px;" />
                        English
                    </span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Change", "Language", new { culture = "ro" })">
                    <span style="display:inline-flex; align-items:center;">
                        <img src="~/Content/images/flags/ro.png" alt="Romanian" style="width:24px; margin-right:8px;" />
                        Romanian
                    </span>
                </a>
            </li>
            <li>
                <a href="@Url.Action("Change", "Language", new { culture = "ru" })">
                    <span style="display:inline-flex; align-items:center;">
                        <img src="~/Content/images/flags/ru.png" alt="Russian" style="width:24px; margin-right:8px;" />
                        Russian
                    </span>
                </a>
            </li>
        </ul>
    </li>
</ul>

<style>
.language-selector .dropdown-menu > li > a {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 20px;
    font-size: 16px;
}
.language-selector .dropdown-menu > li > a img {
    width: 24px;
    height: 16px;
    margin-right: 8px;
}
.language-selector .dropdown-toggle > span {
    vertical-align: middle;
}
</style> 